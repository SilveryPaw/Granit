@use 'config/config' as *;

$block-name: 'b-page';

.#{$block-name} {
    &__screens-container {
        position: relative;
        width: 100vw;
        height: 100vh;
        overflow: hidden;
    }

    &__screen {
        position: absolute;
        top: 0;
        left: 0;
        opacity: 0;
        visibility: hidden;
        transform: translateY(100%);
        transition: transform var(--anim-delay, 1s) ease-in-out;

        
        &.leave-back {
            transform: translateY(-100%);
            opacity: 1;
            visibility: visible;
            z-index: 0;
        }

        &.enter {
            transform: translateY(0);
            opacity: 1;
            visibility: visible;
            z-index: 1;
        }

        &.enter-polygon-bottom {
            --offset: 50%;
            --scale: 0;

            transform: translateY(0);
            transition: clip-path var(--anim-delay, 1s);
            opacity: 1;
            visibility: visible;
            z-index: 1;
            clip-path: $polygonBottom;
        }

        &.enter-polygon-center {
            --scale: 0;

            transform: translateY(0);
            transition: clip-path var(--anim-delay, 1s);
            opacity: 1;
            visibility: visible;
            z-index: 1;
            clip-path: $polygonCentered;
        }

        &.leave-polygon-center {
            --scale: 5;

            transform: translateY(0);
            transition: clip-path var(--anim-delay, 1s);
            opacity: 1;
            visibility: visible;
            z-index: 1;
            clip-path: $polygonCentered;
        }

        &.leave {
            transform: translateY(100%);
            opacity: 1;
            visibility: visible;
            z-index: 0;
        }

        &.leave-half {
            transform: translateY(50%);
            opacity: 1;
            visibility: visible;
            z-index: 0;
            animation: indexAnimDown var(--anim-delay, 1s);
        }

        &.in-slide {
            transition: transform var(--anim-delay, 1s) ease-in-out;
        }

        &.in-fade-under {
            transition: none;
            animation: indexAnimUp var(--anim-delay, 1s);
            animation-play-state: paused;

            &.enter {
                animation-play-state: running;
            }
        }

        &.in-polygon-bottom {
            --scale: 5;
            --offset: 50%;

            transition: clip-path var(--anim-delay, 1s);
        }

        &.in-polygon-center {
            --scale: 5;

            transition: clip-path var(--anim-delay, 1s);
        }

        &.out-scale-under {
            transform-origin: top;
            transition:
                transform 0s linear var(--anim-delay, 1s),
                scale var(--anim-delay, 1s);

            &.leave,
            &.leave-back {
                scale: 0.9;
            }
        }

        &.out-half-leave {
            transition: transform var(--anim-delay, 1s) ease-in-out;
            
            &.leave,
            &.leave-back {
                transform: translateY(-50%);
            }
        }

        &.out-no-leave {
            &.leave,
            &.leave-back {
                transform: translateY(0);
            }
        }

        &.out-hide {
            &.leave,
            &.leave-back {
                transform: translateY(0);
                transition: opacity 0s linear var(--next-anim-delay);
                opacity: 0;
            }
        }

        &.out-fade {
            &.leave,
            &.leave-back {
                transition: opacity var(--anim-delay) ease-in-out;
                transform: translateY(0);
                opacity: 0;
            }
        }

        &.out-content-anim-only {
            &.leave,
            &.leave-back {
                transform: translate(0);

                & [data-content] {
                    transition: transform var(--anim-delay) ease-in-out;
                    opacity: 1;
                    visibility: visible;
                    z-index: 0;
                }
            }

            &.leave [data-content] {
                transform: translateY(100%);
            }

            &.leave-back [data-content] {
                transform: translateY(-100%);
            }
        }

        &.out-polygon-center {
            --scale: 0;

            transition: clip-path var(--anim-delay, 1s);
            animation: indexAnimDown var(--anim-delay, 1s);
        }

        &.no-anim {
            transition: none !important;
        }

        &--third {
            &::after {
                position: absolute;
                width: 100%;
                height: 100%;
                top: 0;
                left: 0;
                background: rgba(0 0 0 / 50%);
                visibility: visible;
                transition:
                    opacity var(--anim-delay, 1s) ease-in-out,
                    visibility 0s linear var(--anim-delay, 1s);
                content: "";
            }

            &.enter::after {
                opacity: 0;
                visibility: hidden;
            }
        }

        @keyframes indexAnimUp {
            from {
                z-index: -1;
            }

            99% {
                z-index: -1;
            }

            to {
                z-index: 2;
            }
        }

        @keyframes indexAnimDown {
            from {
                z-index: 2;
            }

            99% {
                z-index: 2;
            }

            to {
                z-index: -1;
            }
        }
    }

    &__buy-frame {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        z-index: 3;
        opacity: 0;
        visibility: hidden;
        transition:
            opacity var(--base-transition),
            visibility 0s linear var(--base-transition-time);

        &.active {
            visibility: visible;
            opacity: 1;
            background-color: rgba(0 0 0 / 50%);
            transition: opacity var(--base-transition);
        }
    }
}
